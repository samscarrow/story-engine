module|path|language|responsibility|public APIs|key internal deps|key external deps|config/env|tests?|notes/risks
-|-|-|-|-|-|-|-|-
core/common|core/common|Python|config, env loading, logging, CLI, result store|add_model_client_args, get_model_and_client_config, detect_loaded_model, detect_lmstudio_model, detect_koboldcpp_model, validate_model_connection|core/storage|argparse, os, requests, typing, __future__, pathlib|uses env: DB_HOST, DB_NAME, DB_PASSWORD, DB_PORT, DB_SSLCERT, DB_SSLKEY|partial|
core/domain|core/domain|Python|domain models (characters, scenes, narratives)|StoryRequest, NarrativeArc, SceneDescriptor||__future__, dataclasses, typing||partial|
core/orchestration|core/orchestration|Python|LLM orchestration, agent controllers, standardized interfaces|SimulationContext, TemplateMetadata, TemplateRepository, AutonomousPersonaAgent, CharacterSimulatorAgent, SceneArchitectAgent|poml, core/common|asyncio, logging, json, hashlib, typing, pathlib||partial|External LLM APIs; network timeouts
core/story_engine|core/story_engine|Python|narrative graph, pipelines, world state, story arcs|FeedbackType, RevisionStrategy, StoryMetrics, Feedback, StoryVersion, BranchPoint|core/common, poml, core/domain, core/cache, core/orchestration, core/storage|logging, asyncio, json, aiohttp, typing, dataclasses|uses env: DB_DSN, DB_HOST, DB_NAME, DB_PASSWORD, DB_PORT, DB_SSLCERT|partial|High centrality; watch for cycles
core/character_engine|core/character_engine|Python|character simulation engines and group dynamics|LLMResponse, LLMInterface, MockLLM, OpenAILLM, LMStudioLLM, SimulationError|core/story_engine, poml, core/common, core/orchestration|json, asyncio, logging, abc, dataclasses, typing||partial|
core/cache|core/cache|Python|response/result caching|_stable_hash, CacheEntry, ResponseCache||__future__, hashlib, json, time, dataclasses, typing||partial|
core/storage|core/storage|Python|database/storage adapters|DatabaseConnection, SQLiteConnection, PostgreSQLConnection, OracleConnection, get_database_connection||sqlite3, json, abc, typing, psycopg2, oracledb|uses env: TNS_ADMIN|partial|DB drivers; wallet/SSL may be required
poml|poml|Python|POML components/templates and integration|POMLCharacterSimulationEngine, create_poml_engine, SimulationEngineMigrator, PromptTemplate, POMLOrchestrator, OrchestratorMigrationHelper||asyncio, json, logging, pathlib, typing, dataclasses||partial|
scripts|scripts|Python|CLI runners for eval/simulations/setup|main, _read_inputs, load_character, handle_model_change, update_last_model, load_persona_yaml|core/story_engine, core/orchestration, poml, core/storage, core/common, core/character_engine|argparse, json, os, pathlib, sys, asyncio|uses env: CLOUDSQL_ADDRESS, CLOUDSQL_INSTANCE, CLOUDSQL_PORT, CLOUDSQL_PROXY_BIN, DB_HOST, DB_NAME|partial|
examples|examples|Python|usage examples/demonstrations|StoryProjectManager, print_usage_instructions, AutonomousPersonaDemonstration, MigratedCharacterSimulationEngine, MigratedNarrativePipeline, LegacyEngineAdapter|core/orchestration|asyncio, json, logging, datetime, pathlib, typing||partial|
tests|tests|Python|pytest suites and integration tests|find_mock_data_issues, get_line_context, analyze_specific_mock_implementations, main, BreakingPointTester, MockLLMOrchestrator|core/orchestration, examples, core/storage, core/story_engine, core/domain, poml|os, sys, re, pathlib, typing, asyncio||yes|
scene_bank|scene_bank|JSON|reusable scene definitions|||||partial|

